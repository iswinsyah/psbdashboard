<!DOCTYPE html>
<!-- Halaman Data Leads Mitra -->
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Prospek Saya - Portal Mitra</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
</head>
<body>

    <div class="d-flex" id="wrapper">

        <!-- Sidebar Khusus Mitra -->
        <div id="sidebar-wrapper" style="background-color: #2c3e50;">
            <div class="sidebar-heading">
                <div class="text-white fw-bold">MITRA AREA</div>
                <small class="text-muted">Halo, Pak Ahmad</small>
            </div>
            <div class="list-group list-group-flush mt-3">
                <a href="portal-mitra.html" class="list-group-item list-group-item-action">
                    <i class="fas fa-bullhorn me-2"></i> Alat Promosi
                </a>
                <a href="leads-mitra.html" class="list-group-item list-group-item-action active">
                    <i class="fas fa-address-book me-2"></i> Data Prospek
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                    <i class="fas fa-wallet me-2"></i> Komisi Saya
                </a>
                <a href="#" class="list-group-item list-group-item-action">
                    <i class="fas fa-user me-2"></i> Profil
                </a>
                <div class="border-top my-3 border-secondary"></div>
                <a href="index.html" class="list-group-item list-group-item-action text-danger">
                    <i class="fas fa-sign-out-alt me-2"></i> Kembali ke Admin
                </a>
            </div>
        </div>

        <!-- Page Content -->
        <div id="page-content-wrapper">
            <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom">
                <div class="container-fluid">
                    <div class="fw-bold">Daftar Orang yang Masuk Lewat Link Anda</div>
                </div>
            </nav>

            <div class="container-fluid px-4 py-4">
                
                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <small class="text-muted text-uppercase fw-bold">Total Leads</small>
                                    <h3 class="fw-bold mb-0 text-primary">12</h3>
                                </div>
                                <i class="fas fa-users fa-2x text-black-50"></i>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card border-0 shadow-sm p-3">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <small class="text-muted text-uppercase fw-bold">Potensi Komisi</small>
                                    <h3 class="fw-bold mb-0 text-warning">Rp 600rb</h3>
                                </div>
                                <i class="fas fa-coins fa-2x text-black-50"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card border-0 shadow-sm">
                    <div class="card-header bg-white py-3">
                        <h6 class="mb-0 fw-bold text-secondary"><i class="fas fa-list me-2"></i> Riwayat "Tangkapan" Anda</h6>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th>Tanggal</th>
                                        <th>Nama Prospek</th>
                                        <th>Sumber</th>
                                        <th>Status Admin</th>
                                        <th>Aksi</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>28 Jan 2026</td>
                                        <td class="fw-bold">Ibu Rina</td>
                                        <td><span class="badge bg-primary">Ebook</span></td>
                                        <td><span class="badge bg-secondary">Baru Masuk</span></td>
                                        <td><button class="btn btn-sm btn-success" onclick="openFollowUp('Ibu Rina')"><i class="fab fa-whatsapp"></i> Follow Up</button></td>
                                    </tr>
                                    <tr>
                                        <td>27 Jan 2026</td>
                                        <td class="fw-bold">Pak Budi</td>
                                        <td><span class="badge bg-warning text-dark">Tes Hafidz</span></td>
                                        <td><span class="badge bg-info text-dark">Sedang Follow Up</span></td>
                                        <td><button class="btn btn-sm btn-success" onclick="openFollowUp('Pak Budi')"><i class="fab fa-whatsapp"></i> Follow Up</button></td>
                                    </tr>
                                    <tr>
                                        <td>25 Jan 2026</td>
                                        <td class="fw-bold">Keluarga Pak Andi</td>
                                        <td><span class="badge bg-primary">Ebook</span></td>
                                        <td><span class="badge bg-success">Closing (Lunas)</span></td>
                                        <td><button class="btn btn-sm btn-secondary" disabled>Selesai</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="alert alert-light mt-3 mb-0 small">
                            <i class="fas fa-info-circle me-1"></i> 
                            Data ini sinkron dengan database Admin. Jika status berubah menjadi <strong>Closing</strong>, komisi akan otomatis masuk ke dompet Anda.
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Modal Generator Pesan Follow Up -->
    <div class="modal fade" id="followUpModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold">Follow Up: <span id="modalProspekName" class="text-primary"></span></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info small py-2 mb-3">
                        <i class="fas fa-info-circle me-1"></i> Ajak mereka masuk ke Zoominar agar lebih yakin mendaftar.
                    </div>

                    <label class="small fw-bold text-secondary mb-2">Pilih Jenis Pesan</label>
                    <select class="form-select form-select-sm mb-3" id="followUpAngle" onchange="generateFollowUp()">
                        <option value="invite">1. Undangan Awal (Baru Gabung)</option>
                        <option value="reminder">2. Reminder H-1 (Besok Acara)</option>
                        <option value="link">3. Share Link Zoom (Hari H)</option>
                    </select>
                    
                    <label class="small fw-bold text-secondary mb-2">Preview Pesan</label>
                    <textarea class="form-control mb-3 text-muted bg-light" id="followUpMsg" rows="6" style="font-size: 0.9rem;" readonly></textarea>
                    
                    <button class="btn btn-success w-100 fw-bold" onclick="sendFollowUp()">
                        <i class="fab fa-whatsapp me-2"></i> KIRIM KE WHATSAPP
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentProspek = "";

        function getGreeting() {
            const hour = new Date().getHours();
            if (hour < 10) return "Selamat Pagi";
            if (hour < 15) return "Selamat Siang";
            if (hour < 18) return "Selamat Sore";
            return "Selamat Malam";
        }

        const templates = {
            invite: "{SALAM} {NAMA}. Terima kasih sudah download Ebook/Ikut Tes kemarin ya. ðŸ˜Š Sekadar info, kami ada *Zoominar Parenting Gratis* minggu ini. Materinya bagus banget buat melengkapi Ebook kemarin. Mau saya kirimkan infonya?",
            reminder: "{SALAM} {NAMA}. Mengingatkan besok pagi jam 09.00 WIB kita ada Zoominar Parenting ya. Pastikan alarmnya dipasang biar nggak ketinggalan materi dagingnya! â°",
            link: "{SALAM} {NAMA}. Acaranya sebentar lagi mulai ya! ðŸš€ Ini link Zoom-nya: bit.ly/ZoomParentingBaron. Ditunggu kehadirannya ya Bun/Pak!"
        };

        function openFollowUp(name) {
            currentProspek = name;
            document.getElementById('modalProspekName').innerText = name;
            document.getElementById('followUpAngle').value = 'invite'; // Default
            generateFollowUp();
            
            var myModal = new bootstrap.Modal(document.getElementById('followUpModal'));
            myModal.show();
        }

        function generateFollowUp() {
            const angle = document.getElementById('followUpAngle').value;
            const greeting = getGreeting();
            
            let template = templates[angle];
            let message = template.replace("{SALAM}", greeting).replace("{NAMA}", currentProspek);
            
            document.getElementById('followUpMsg').value = message;
        }

        function sendFollowUp() {
            var msgText = document.getElementById('followUpMsg').value;
            var encodedMsg = encodeURIComponent(msgText);
            // Di sistem real, kita akan ambil nomor WA dari database berdasarkan nama prospek
            // Untuk prototype ini, kita buka WA umum
            var waUrl = "https://wa.me/?text=" + encodedMsg; 
            
            window.open(waUrl, '_blank');
        }
    </script>
</body>
</html>